# 贪吃蛇游戏需求设计文档

## 1. 核心功能需求详细设计

### 1.1 游戏基础元素

#### 蛇的设计
- 初始状态：
  - 初始长度：3个单位
  - 初始位置：游戏区域中心
  - 初始方向：向右
- 蛇的组成：
  - 蛇头：需要特殊标识，与身体区分
  - 蛇身：由多个连续单位格组成
  - 每个单位的大小：20x20像素（可配置）

#### 食物系统
- 基础特性：
  - 随机出现在空白位置
  - 不能出现在蛇身上
  - 同一时间只存在一个食物
- 食物效果：
  - 吃到食物后蛇身增长一个单位
  - 得分增加

#### 游戏场地
- 区域大小：400x400像素（可配置）
- 网格系统：20x20的方格
- 边界处理：撞墙即死

### 1.2 游戏控制系统

#### 移动机制
- 移动方式：
  - 按固定时间间隔移动一格
  - 初始移动速度：200ms/格
- 方向控制：
  - 上：↑ 或 W
  - 下：↓ 或 S
  - 左：← 或 A
  - 右：→ 或 D
- 移动限制：
  - 不能直接向反方向移动
  - 每次移动前检查按键缓存

#### 游戏控制
- 暂停功能：
  - 暂停键：空格
  - 暂停时显示暂停提示
- 重新开始：
  - 触发条件：游戏结束时或主动重启
  - 重置键：R键

#### 游戏结束条件
- 撞墙：蛇头碰到边界
- 自撞：蛇头碰到自己的身体
- 结束后显示最终得分和重新开始选项

### 1.3 计分系统
- 得分规则：
  - 每吃到一个食物：+10分
- 分数显示：
  - 实时显示当前分数
  - 显示最高分记录
- 分数存储：
  - 使用localStorage保存最高分

## 2. 基础界面设计
- 游戏区域：
  - 黑色边框
  - 浅色背景
- 信息显示区：
  - 当前分数
  - 最高分
  - 游戏状态（进行中/暂停/结束）
- 操作提示：
  - 显示基本操作按键说明

## 3. 技术实现重点
- 游戏主循环：
  - 使用requestAnimationFrame实现
  - 固定时间间隔更新游戏状态
- 碰撞检测：
  - 边界碰撞检测
  - 自身碰撞检测
  - 食物碰撞检测
- 状态管理：
  - 蛇的位置状态
  - 食物位置状态
  - 游戏状态（运行/暂停/结束）

## 4. 更新日志
- 初始版本：创建基础需求文档框架
- 更新1.0：完善核心功能详细设计

## 7. 需求确认状态
### 7.1 已确认的核心配置
- ✅ 画布尺寸：600x600像素
- ✅ 网格大小：25像素
- ✅ 网格数量：24x24
- ✅ 移动速度：300ms/格
- ✅ 初始蛇长：4个单位
- ✅ 基础得分：每个食物10分

## 8. 更新日志
- 更新1.4：标记已确认的核心配置参数